{"id":"Bd+X","dependencies":[{"name":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/draw/drawFaceExpressions.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/src/draw/drawFaceExpressions.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/gregwilken/code/chadnotchad/package.json","includedInParent":true,"mtime":1568572563000},{"name":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/package.json","includedInParent":true,"mtime":1568569762542},{"name":"tfjs-image-recognition-base","loc":{"line":1,"column":35},"parent":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/draw/drawFaceExpressions.js","resolved":"/Users/gregwilken/code/chadnotchad/node_modules/tfjs-image-recognition-base/build/es6/index.js"},{"name":"../faceExpressionNet","loc":{"line":2,"column":32},"parent":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/draw/drawFaceExpressions.js","resolved":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/faceExpressionNet/index.js"},{"name":"../factories/WithFaceDetection","loc":{"line":3,"column":36},"parent":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/draw/drawFaceExpressions.js","resolved":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/factories/WithFaceDetection.js"},{"name":"../factories/WithFaceExpressions","loc":{"line":4,"column":38},"parent":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/draw/drawFaceExpressions.js","resolved":"/Users/gregwilken/code/chadnotchad/node_modules/face-api.js/build/es6/factories/WithFaceExpressions.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.drawFaceExpressions=o;var e=require(\"tfjs-image-recognition-base\"),r=require(\"../faceExpressionNet\"),i=require(\"../factories/WithFaceDetection\"),s=require(\"../factories/WithFaceExpressions\");function o(o,t,a,n){void 0===a&&(a=.1),(Array.isArray(t)?t:[t]).forEach(function(t){var c=t instanceof r.FaceExpressions?t:(0,s.isWithFaceExpressions)(t)?t.expressions:void 0;if(!c)throw new Error(\"drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof\");var p=c.asSortedArray().filter(function(e){return e.probability>a}),f=(0,i.isWithFaceDetection)(t)?t.detection.box.bottomLeft:n||new e.Point(0,0);new e.draw.DrawTextField(p.map(function(r){return r.expression+\" (\"+(0,e.round)(r.probability)+\")\"}),f).draw(o)})}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":96}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":104}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":112}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":143}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":145}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":153}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":177}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":187}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":221}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":223}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":231}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":1,"column":267}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":9,"column":16},"generated":{"line":1,"column":276}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":10,"column":2},"generated":{"line":1,"column":278}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":280}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":282}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":13,"column":2},"generated":{"line":1,"column":284}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":292}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":296}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":300}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":302}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":31},"generated":{"line":1,"column":307}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":37},"generated":{"line":1,"column":313}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":45},"generated":{"line":1,"column":321}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":64},"generated":{"line":1,"column":324}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":82},"generated":{"line":1,"column":326}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":15,"column":83},"generated":{"line":1,"column":327}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":331}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":17,"column":31},"generated":{"line":1,"column":339}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":17,"column":31},"generated":{"line":1,"column":348}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":18,"column":10},"generated":{"line":1,"column":351}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":18,"column":10},"generated":{"line":1,"column":355}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":18,"column":17},"generated":{"line":1,"column":357}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":18,"column":30},"generated":{"line":1,"column":370}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":18,"column":17},"generated":{"line":1,"column":372}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":388}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":9},"generated":{"line":1,"column":391}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":31},"generated":{"line":1,"column":393}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":31},"generated":{"line":1,"column":395}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":31},"generated":{"line":1,"column":418}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":36},"generated":{"line":1,"column":421}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":38},"generated":{"line":1,"column":423}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":20,"column":52},"generated":{"line":1,"column":440}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":442}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":446}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":1,"column":448}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":1,"column":454}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":458}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":22,"column":22},"generated":{"line":1,"column":464}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":25,"column":10},"generated":{"line":1,"column":579}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":583}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":25,"column":19},"generated":{"line":1,"column":585}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":587}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":36},"generated":{"line":1,"column":603}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":610}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":619}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":51},"generated":{"line":1,"column":622}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":51},"generated":{"line":1,"column":629}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":56},"generated":{"line":1,"column":631}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":26,"column":70},"generated":{"line":1,"column":643}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":647}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":28,"column":19},"generated":{"line":1,"column":650}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":652}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":654}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":675}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":678}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":680}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":690}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":1,"column":694}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":9},"generated":{"line":1,"column":705}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":28},"generated":{"line":1,"column":708}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":32},"generated":{"line":1,"column":712}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":28},"generated":{"line":1,"column":714}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":38},"generated":{"line":1,"column":720}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":30,"column":41},"generated":{"line":1,"column":722}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":725}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":32,"column":30},"generated":{"line":1,"column":729}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":32,"column":35},"generated":{"line":1,"column":731}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":32,"column":35},"generated":{"line":1,"column":736}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":750}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":752}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":27},"generated":{"line":1,"column":756}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":27},"generated":{"line":1,"column":765}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":38},"generated":{"line":1,"column":768}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":38},"generated":{"line":1,"column":775}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":43},"generated":{"line":1,"column":777}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":53},"generated":{"line":1,"column":788}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":58},"generated":{"line":1,"column":794}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":64},"generated":{"line":1,"column":796}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":64},"generated":{"line":1,"column":798}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":64},"generated":{"line":1,"column":805}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":69},"generated":{"line":1,"column":807}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":33,"column":81},"generated":{"line":1,"column":820}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":826}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":36,"column":18},"generated":{"line":1,"column":829}},{"source":"../../../src/draw/drawFaceExpressions.ts","name":null,"original":{"line":36,"column":23},"generated":{"line":1,"column":834}}],"sources":{"../../../src/draw/drawFaceExpressions.ts":"import { draw, IPoint, Point, round } from 'tfjs-image-recognition-base';\r\n\r\nimport { FaceExpressions } from '../faceExpressionNet';\r\nimport { isWithFaceDetection } from '../factories/WithFaceDetection';\r\nimport { isWithFaceExpressions, WithFaceExpressions } from '../factories/WithFaceExpressions';\r\n\r\nexport type DrawFaceExpressionsInput = FaceExpressions | WithFaceExpressions<{}>\r\n\r\nexport function drawFaceExpressions(\r\n  canvasArg: string | HTMLCanvasElement,\r\n  faceExpressions: DrawFaceExpressionsInput | Array<DrawFaceExpressionsInput>,\r\n  minConfidence = 0.1,\r\n  textFieldAnchor?: IPoint\r\n) {\r\n  const faceExpressionsArray = Array.isArray(faceExpressions) ? faceExpressions : [faceExpressions]\r\n\r\n  faceExpressionsArray.forEach(e => {\r\n    const expr = e instanceof FaceExpressions\r\n      ? e\r\n      : (isWithFaceExpressions(e) ? e.expressions : undefined)\r\n    if (!expr) {\r\n      throw new Error('drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof')\r\n    }\r\n\r\n    const sorted = expr.asSortedArray()\r\n    const resultsToDisplay = sorted.filter(expr => expr.probability > minConfidence)\r\n\r\n    const anchor = isWithFaceDetection(e)\r\n      ? e.detection.box.bottomLeft\r\n      : (textFieldAnchor || new Point(0, 0))\r\n\r\n    const drawTextField = new draw.DrawTextField(\r\n      resultsToDisplay.map(expr => `${expr.expression} (${round(expr.probability)})`),\r\n      anchor\r\n    )\r\n    drawTextField.draw(canvasArg)\r\n  })\r\n}"},"lineCount":null}},"error":null,"hash":"aeb22b2e63feddee8cc87adeaa96864e","cacheData":{"env":{}}}